{% extends 'base.html' %}
{% set active_section = 'home' %}

{% block content %}
<div class="mdc-layout-grid">
  <div class="mdc-layout-grid__inner home-page">
    <div class="mdc-layout-grid__cell--span-6 hero">
      <h1 class="title">A complete picture of vulnerabilities in your open source dependencies.</h1>
      <div class="explainer">
        <p class="google-backed">
          An ongoing project backed by Google.
        </p>
        <p>
          OSV captures precise data about a vulnerability's impact, and
          automates the process of vulnerability triage and database
          maintenance across major open source ecosystems.
        </p>
      </div>
      <div class="cta">
        <a class="cta-primary link-button" href="{{ url_for('frontend_handlers.list_vulnerabilities') }}">Search Vulnerability Database</a>
        <a class="cta-secondary" href="#">Learn more</a>
      </div>
    </div>
    <div class="mdc-layout-grid__cell--span-12 ecosystem-counts">
      <h2 class="heading">Our current vulnerability coverage</h2>
      <dl class="ecosystems">
        {% if ecosystem_counts %}
          {% set total = ecosystem_counts.values() | sum %}
          {% for ecosystem in ecosystem_counts %}
            <dt>{{ ecosystem }}</dt>
            <dd>
              <span class="ecosystem-count" style="
                  width: {{ ecosystem_counts[ecosystem] / total * 100 }}%;">
                {{ ecosystem_counts[ecosystem] }}
              </span>
            </dd>
          {% endfor %}
        {% endif %}
      </dl>
    </div>
    <div class="mdc-layout-grid__cell--span-12 usage-examples">
      <h2 class="heading">Use the API</h2>
      
      <div class="mdc-layout-grid__inner">
        <div class="code-card mdc-layout-grid__cell--span-6">
          <h3 class="code-card-title">Query by commit hash</h3>
          <pre id="example-commit-hash">curl -X POST -d \
  '{"commit": "6879efc2c1596d11a6a6ad296f80063b558d5e0f"}' \
  "https://api.osv.dev/v1/query"</pre>
          <clipboard-copy class="code-card-copy" for="example-commit-hash">
            <mwc-icon-button class="icon" icon="content_copy"></mwc-icon-button>
          </clipboard-copy>
        </div>
        <div class="code-card mdc-layout-grid__cell--span-6">
          <h3 class="code-card-title">Query by version number</h3>
          <pre id="example-version-number">curl -X POST -d \
  '{"version": "2.4.1",
    "package": {"name": "jinja2", "ecosystem": "PyPI"}}' \
  "https://api.osv.dev/v1/query"</pre>
          <clipboard-copy class="code-card-copy" for="example-version-number">
            <mwc-icon-button class="icon" icon="content_copy"></mwc-icon-button>
          </clipboard-copy>
        </div>
      </div>
    </div>
    <div class="mdc-layout-grid__cell--span-12 api-banner">
      <h2 class="heading">Understand your open source exposure.</h2>
      <p class="description">
        Enter a git commit hash or version number and the API
        returns a list of vulnerabilities affecting that version.
      </p>
      <div class="cta">
        <a class="link-button" href="{{ url_for('frontend_handlers.list_vulnerabilities') }}">To the API</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
